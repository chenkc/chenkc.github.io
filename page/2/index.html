<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="chenkc" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="chenkc">
<meta property="og:url" content="http://chenkc.github.io/page/2/index.html">
<meta property="og:site_name" content="chenkc">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="chenkc">
<meta name="twitter:description">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://chenkc.github.io/page/2/"/>


  <title> chenkc </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-tw">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">chenkc</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">software otaku</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首頁
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            歸檔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            標籤
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            Schedule
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            檢索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/classics/2017-1117-great-learning/" itemprop="url">
                  大學
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2017-11-17T22:14:10+08:00" content="2017-11-17">
              2017-11-17
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/classics/" itemprop="url" rel="index">
                    <span itemprop="name">classics</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="語音版"><a href="#語音版" class="headerlink" title="語音版　"></a>語音版　</h2><!-- 
- [ ](https://translate.google.com/translate_tts?ie=UTF-8&total=1&idx=0&textlen=32&client=tw-ob&tl=zh&q=)
-->
<ul>
<li><a href="https://translate.google.com/translate_tts?ie=UTF-8&amp;total=1&amp;idx=0&amp;textlen=32&amp;client=tw-ob&amp;tl=zh&amp;q=經一章。大學之道。大學之道，在明明德，在親民，在止於至善。知止而后有定，定而后能靜，靜而后能安，安而后能慮，慮而后能得。物有本末，事有終始，知所先後，則近道矣。" target="_blank" rel="external">經一章 大學之道 01</a></li>
<li><a href="https://translate.google.com/translate_tts?ie=UTF-8&amp;total=1&amp;idx=0&amp;textlen=32&amp;client=tw-ob&amp;tl=zh&amp;q=古之欲明明德於天下者，先治其國；欲治其國者，先齊其家；欲齊其家者，先修其身；欲修其身者，先正其心；欲正其心者，先誠其意；欲誠其意者，先致其知；致知在格物。物格而后知至，知至而后意誠，意誠而后心正，心正而后身修，身修而后家齊，家齊而后國治，國治而后天下平。自天子以自於庶人，壹是皆以修身為本。其本亂而末治者否矣；其所厚者脖，而其所脖者厚，未之有也。" target="_blank" rel="external">經一章 大學之道 02</a>  </li>
<li><a href="https://translate.google.com/translate_tts?ie=UTF-8&amp;total=1&amp;idx=0&amp;textlen=32&amp;client=tw-ob&amp;tl=zh&amp;q=撰第一。釋明明德。康誥曰：「克明德。」大甲曰：「顧諟天之明命。」帝典曰：「克明峻德」皆自明也。" target="_blank" rel="external">傳第一 釋明明德</a></li>
<li><a href="https://translate.google.com/translate_tts?ie=UTF-8&amp;total=1&amp;idx=0&amp;textlen=32&amp;client=tw-ob&amp;tl=zh&amp;q=撰第二。釋新民。湯之盤銘曰：「苟日新，日日新，又日新。」康誥曰：「作新民。」詩曰：「周雖舊邦，其命維新。」是故君子無所不用其極。" target="_blank" rel="external">傳第二 釋新民</a></li>
</ul>
<h2 id="經一章-大學之道"><a href="#經一章-大學之道" class="headerlink" title="經一章 大學之道"></a>經一章 大學之道</h2><p>大學之道，在明明德，在親民，在止於至善。知止而后有定，<br>定而后能靜，靜而后能安，安而后能慮，慮而后能得。<br>物有本末，事有終始，知所先後，則近道矣。</p>
<p>古之欲明明德於天下者，先治其國；欲治其國者，先齊其家；<br>欲齊其家者，先修其身；欲修其身者，先正其心；欲正其心者<br>，先誠其意；欲誠其意者，先致其知；致知在格物。物格而后<br>知至，知至而后意誠，意誠而后心正，心正而后身修，身修而<br>后家齊，家齊而后國治，國治而后天下平。</p>
<p>自天子以自於庶人，壹是皆以修身為本。其本亂而末治者否矣；<br>其所厚者薄，而其所薄者厚，未之有也。</p>
<h2 id="傳十章"><a href="#傳十章" class="headerlink" title="傳十章"></a>傳十章</h2><h2 id="傳第一-釋明明德"><a href="#傳第一-釋明明德" class="headerlink" title="傳第一 釋明明德"></a>傳第一 釋明明德</h2><p>康誥曰：「克明德。」大甲曰：「顧諟天之明命。」<br>帝典曰：「克明峻德」皆自明也。</p>
<h2 id="傳第二-釋新民"><a href="#傳第二-釋新民" class="headerlink" title="傳第二 釋新民"></a>傳第二 釋新民</h2><p>湯之盤銘曰：「苟日新，日日新，又日新。」康誥曰：「作新民。」<br>詩曰：「周雖舊邦，其命維新。」是故君子無所不用其極。</p>
<h2 id="傳第三-釋止於至善"><a href="#傳第三-釋止於至善" class="headerlink" title="傳第三 釋止於至善"></a>傳第三 釋止於至善</h2><p>詩曰：「邦畿千里，惟民所止。」詩云：「緡蠻黃鳥，止於丘隅。」<br>子曰：「於止，知其所止，可以人而不如鳥乎」<br>詩云：「穆穆文王，於緝熙敬止。」為人君，止於仁；<br>為人臣，止於敬；為人子，止於孝；為人父，止於慈；<br>與國人交，止於信。<br>詩云：「瞻彼淇澳，菉竹猗猗。有斐君子，如切如磋，如琢如磨；<br>瑟兮僩兮，赫兮喧兮，有斐君子，終不可諠兮。」<br>如切如磋者，道學也；如琢如磨者，自修也；<br>瑟兮僩兮者，恂慄也；赫兮喧兮者，威儀也；<br>有斐君子，終不可諠兮者，道盛德至善，民之不能忘也。<br>詩云：「於戲，前王不忘。」君子賢其賢而親其親，<br>小人樂其樂 而利其利，此以沒世不忘也。</p>
<!--

（四）釋本末

子曰：「聽訟，吾猶人也；必也使無訟乎！」無情者不得盡

其辭，大畏民志；此謂知本。




（五）釋格物致知

此謂知本，此謂知之至也。

所謂致其知在格其物者，心有所貪慾而性辟焉，心有所嗔忿

而性塞焉，心有所癡奢而性蕩焉，心有所愛妄而性遷焉。是

以欲格其心物者，必戒貪慾，則扶性辟為正矣。息嗔忿，則

闢性塞為揚矣。消癡奢，則收性蕩為定矣。剷愛妄，則挽性

遷為止矣。

是故君子慎心物於隱微，遏意惡於動機。

故心物自蔽，身物自染。格心物者，復性初也；驅身物者，

覺心源也；性心身者，一貫也，三者之不可離，猶植根本之

不可分矣。性心居內曰自覺焉，身行著外曰覺人焉。故內聖

外王之功，豈可缺一哉。

心物滋蔓，莫不自蔽己性焉。故聖人慎心物於隱微之間，心

物未動也，雖未動而持之一慎，則心物終無矣！心物終無，

則至性常皓，至性常皓，則即復性初也。

身物昭著，莫不自染己心焉。故賢人驅身物於昭著者，以其

心物未慎於隱微也，心物弗慎於未動之間，貪嗔癡愛遂熾焉

，而現於言行矣！此謂之身物昭著者也。

故驅身物者，即曰覺心源也。心者易動，深恐始勤終懈，是

病焉。則身物復昭著矣。如能始終覺心則亦漸趨於覺性矣！

及其成功一也。此謂物不格不可以致其知。

所謂誠其意在致其知者。故心物未發謂中和，良知性也。心

物既發謂動機，紛乘意也。是以慎心物於隱微，遏意惡於動

機，以復其良知，而臻於至理矣。

故格其心物以致其良知者，內聖功也。聖足而後，則意不誠

而誠矣，心不正而正矣。雖序有四，實則二焉，以其心意儲

諸一身，故亦列內聖之功矣！此謂知不致，不可以誠其意。

所謂致知在格物者，言欲致吾之知，在即物而窮其理也。蓋

人心之靈莫不有知，而天下之物莫不有理。惟於理有未窮，

故其知有不盡也。是以大學始教，必使學者即 凡天下之物，

莫不因其已知之理而益窮之，以求至乎其極。至於用力之久

，而一旦豁然貫通焉，則眾物之表裡精粗無不到，而吾心之

全體大用無不明矣。此謂物格，此謂知之至也。




（六）釋誠意

所謂「誠其意」者，毋自欺也，如惡惡臭，如好好色，此之

謂自謙。故君子必慎其獨也。小人閒居為不善，無所不至；

見君子而後厭然，揜其不善而著其善；人之視 己如見其肺

肝然，則何益矣？此謂誠於中，行於外。故君子必慎其獨也。

曾子曰：「十目所視，十手所指，其嚴乎！」富潤屋，德潤

身，心廣體胖。故君子必誠其意。





（七）釋正心修身

所謂「修身在正其心」者，身有所忿懥則不得其正，有所恐

懼則不得其正，有所好樂而不得其正，有所憂患則不得其正

。心不在焉，視而不見，聽而不聞，食而不知其味。此謂

「修身在正其心」。





（八）釋修身齊家

所謂「齊其家在修其身」者，人之其所親愛而辟焉，之其所

賤惡而辟焉，之其所畏敬而辟焉，之其所哀矜而辟焉，之其

所傲惰而辟焉。故好而知其惡，惡而知其美者，天下鮮矣。

故諺有之曰：「人莫知其子之惡，莫知其苗之碩。」此謂身

（九）釋齊家治國

所謂「治國必先齊其家者」，其家不可教，而能教人者，無

之。故君子不出家，而成教於國。孝者所以事君也，弟者所

以事長也，慈者所以使眾也。康誥曰：「如保赤子。」心誠

求之，雖不中，不遠矣。未有學養子，而後嫁者也。一家仁

，一國興仁；一家讓，一國興讓；一人貪戾，一國作亂；其

機如此。此謂一言僨事，一人定國。堯舜帥天下以仁，而民

從之。桀紂帥天下以暴，而民從之。其所令反其所好，而民

不從。是故君子有諸己，而后求諸人；無諸己，而后非諸人

。所藏乎身不恕，而能喻諸人者，未之有也。故治國在齊其

家。

詩云：「桃之夭夭，其葉蓁蓁，之子于歸，宜其家人。」宜

其家人，而后可以教國人。詩云：「宜兄宜弟。」宜兄宜弟

，而后可以教國人。詩云：「其儀不忒，正是四國。」其為

父子兄弟足法，而后民法之也。此謂治國在齊其家。





（十）釋治國平天下

所謂平天下在治其國者。上老老，而民興孝；上長長，而民

興弟；上恤孤，而民不倍。是以君子有絜矩之道也。所惡於

上，毋以使下；所惡於下，毋以事上；所惡於前，毋以先

後；所惡於後，毋以從前；所惡於右，毋以交於左；所惡於

左，毋以交於右，此之謂絜矩之道。詩云：「樂只君子，民

之父母。」民之所好好之，民之所 惡惡之，此之謂民之父

母。詩云：「節彼南山，維石巖巖；赫赫師尹，民具爾瞻。」

有國者不可以不慎，辟，則為天下僇矣！

詩云：「殷之未喪師，克配上帝；儀監于殷，峻命不易。」

道得眾則得國，失眾則失國。是故君子先慎乎德：有德此有

人，有人此有土，有土此有財，有財此有用。德者本也，

財者末也。外本內末，爭民施奪。是故財聚則民散，財散則

民聚。是故言悖而出者，亦悖而入；貨悖而入者，亦悖而出

。康誥曰：「惟命不于常。」道善 則得之，不善則失之矣

。楚書曰：「楚國無以為寶，惟善以為寶。」

舅犯曰：「亡人無以為寶，仁親以為寶。」

秦誓曰：「若有一個臣，斷斷兮，無他技；其心休休焉，其

如有容焉；人之有技，若己有之；人之彥聖，其心好之；其

心好之；不啻若自其口出，實能容之，以能保 我子孫黎民

，尚亦有利哉！人之有技，媢嫉以惡之；人之彥聖，而違之

俾不通；實不能容，以不能保我子孫黎民，亦曰殆哉！」唯

仁人，放流之，迸諸四夷，不與同中國。此謂「唯仁人為能

愛人，能惡人。」見賢而不能舉，舉而不能先，命也；見不

善而不能退，退而不能遠，過也。好人之所惡，惡人之所好

，是謂拂人之性，菑必逮夫身。是故君子有大道，必忠信以

得之，驕泰以失之。生財有大道；生之者眾，食之者寡；為

之者疾，用之者舒，則財恆足矣！仁者以財發身，不仁者以

身發財。未有上好仁，而下不好義者也；未有好義，其事不

終者也；未有府庫財，非其財者也。

-->
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/hello-world/" itemprop="url">
                  Hello World
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2016-04-21T15:14:22+08:00" content="2016-04-21">
              2016-04-21
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/hexo-how-to/" itemprop="url">
                  Hexo-how-to
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2016-04-15T16:53:32+08:00" content="2016-04-15">
              2016-04-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/how-to/" itemprop="url" rel="index">
                    <span itemprop="name">how-to</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>Target: Using Hexo to create Embux FAQ &amp; Documentation website.</p>
<p>Note: Hexo is a fast, simple and powerful blog framework. You write posts in Markdown (or other languages) and Hexo generates static files with a beautiful theme in seconds.</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>Quick Guideline</p>
<ul>
<li>Pre-requirement: Node.js and Git  </li>
<li><p>Install Hexo <code>$ npm install -g hexo-cli</code></p>
</li>
<li><p>fix git deploy error<br>npm install hexo-deployer-git –save</p>
</li>
<li><p>hexo full text search<br>npm install hexo-generator-search –save</p>
</li>
</ul>
<p>Refer:  </p>
<ul>
<li><a href="https://hexo.io/zh-tw/docs/index.html" target="_blank" rel="external">Hexo: Getting Started - Overview</a> for detail information and installation steps. </li>
<li><a href="http://www.jianshu.com/p/35e197cb1273" target="_blank" rel="external">Hexo FAQ</a></li>
</ul>
<h2 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h2><ul>
<li>Initialize Hexo</li>
</ul>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>hexo init &lt;folder&gt;  </span><br><span class="line"><span class="variable">$ </span>cd &lt;folder&gt;</span><br><span class="line"><span class="variable">$ </span>npm install</span><br></pre></td></tr></table></figure>
<p>Note: <folder>, target folder to store the hexo website</folder></p>
<p>Once the initialization complete, the folder structure will like</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">├──  _<span class="built_in">config</span>.yml  <span class="comment"># the major config file</span></span><br><span class="line">├──  package.<span class="keyword">json </span><span class="comment"># application data</span></span><br><span class="line">├──  <span class="keyword">scaffolds </span>   <span class="comment"># for each new post, Hexo bases the new file on it</span></span><br><span class="line">├──  source		  <span class="comment"># where the document </span></span><br><span class="line">└──  themes       <span class="comment"># theme contents</span></span><br></pre></td></tr></table></figure>
<p>Refer to <a href="https://hexo.io/docs/setup.html" target="_blank" rel="external">Hexo: Getting Started - Setup</a> for detail information.</p>
<h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><p>Modify site settings in <code>_config.yml</code></p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># Site</span></span><br><span class="line"><span class="symbol">title:</span> EMBUX</span><br><span class="line"></span><br><span class="line"><span class="meta"># URL</span></span><br><span class="line"><span class="symbol">permailnk:</span> :title/    <span class="meta"># change to remove date&amp;time folder type</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># Writing</span></span><br><span class="line"><span class="symbol">filename_case:</span> <span class="number">1</span>      <span class="meta"># use lower case for file naming</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># Extensions</span></span><br><span class="line"><span class="symbol">theme:</span> embux	         <span class="meta"># change to custom theme</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># Deployment</span></span><br><span class="line"><span class="symbol">deploy:</span></span><br><span class="line"><span class="symbol">  type:</span> git</span><br><span class="line"><span class="symbol">  repo:</span> https:<span class="comment">//github.com/embux/embux.github.io.git</span></span><br><span class="line"><span class="symbol">  branch:</span> master</span><br></pre></td></tr></table></figure>
<p>Refer to <a href="https://hexo.io/docs/configuration.html" target="_blank" rel="external">Hexo: Getting Started - Configuration</a> for detail information.</p>
<h2 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h2><ul>
<li>init:     <code>$ hexo init &lt;folder&gt;</code></li>
<li>new:      <code>$ hexo new [layout] &lt;title&gt;</code><ul>
<li>layout: using “draft” for imcomplete article</li>
</ul>
</li>
<li>generate: <code>$ hexo g</code></li>
<li>publish:  <code>$ hexo p</code>  # publish a draft</li>
<li>server:   <code>$ hexo s -p 4000</code>  # start a local server for preview</li>
<li>deploy:   <code>hexo d</code> # deploy web-site to pre-defined(<code>_config.yml</code>) web-site </li>
<li>clean:    <code>hexo clean</code>  # clean the cache file </li>
</ul>
<p>Refer to <a href="https://hexo.io/docs/commands.html" target="_blank" rel="external">Hexo: Getting Started - Commands</a> for detail information.</p>
<h2 id="Customization"><a href="#Customization" class="headerlink" title="Customization"></a>Customization</h2><h3 id="Rss"><a href="#Rss" class="headerlink" title="Rss"></a>Rss</h3><p><code>npm install hexo-generator-feed --save</code></p>
<p>change themes/XXX/_config.yml</p>
<p><code>rss: /atom.xml</code></p>
<h3 id="Sitemap"><a href="#Sitemap" class="headerlink" title="Sitemap"></a>Sitemap</h3><p><code>npm install hexo-generator-sitmap --save</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/android-usb-tethering/" itemprop="url">
                  Android USB Tethering
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2016-03-22T16:56:30+08:00" content="2016-03-22">
              2016-03-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>refer: <a href="https://wiki.gentoo.org/wiki/Android_USB_Tethering" target="_blank" rel="external">Original link</a></p>
<p>Tethering means sharing the Internet connection of an Internet-capable mobile phone with other devices. This sharing can be offered over a wireless LAN (Wi-Fi), or over Bluetooth, or by physical connection using a cable (Tethering).</p>
<p>Our focus in this article will be the USB tethering.<br>Your Android mobile phone can behave as an external network interface usbN, connected via the USB infrastructure. The usbN interface is in turn connected to the mobile phone LAN, providing dhcp server, DNS server, gateway and so on.<br>That’s how your mobile phone can provide an Internet connection to another device.</p>
<p>Android phones are already equipped to provide this functionality. Simply connect the USB cable and go to Settings -&gt; Wireless settings -&gt; Tethering -&gt; Tethering USB.</p>
<p>What you need is some kernel and network configuration on the other side (e.g. your laptop).</p>
<p>Contents<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1 <span class="selector-tag">Kernel</span> <span class="selector-tag">configuration</span></span><br><span class="line">2 <span class="selector-tag">Tested</span> <span class="selector-tag">Devices</span></span><br><span class="line">3 <span class="selector-tag">Testing</span></span><br><span class="line">4 <span class="selector-tag">Connecting</span></span><br><span class="line">    4<span class="selector-class">.1</span> <span class="selector-tag">Manually</span></span><br><span class="line">    4<span class="selector-class">.2</span> <span class="selector-tag">Permanent</span> <span class="selector-tag">configuration</span></span><br><span class="line">    4<span class="selector-class">.3</span> <span class="selector-tag">Checks</span></span><br><span class="line">5 <span class="selector-tag">Advanced</span> <span class="selector-tag">network</span> <span class="selector-tag">settings</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Kernel-configuration"><a href="#Kernel-configuration" class="headerlink" title="Kernel configuration"></a>Kernel configuration</h2><p>KERNEL .config 3.0.6-gentoo</p>
<figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">G<span class="function"><span class="title">eneral</span> setup  ---&gt;</span></span><br><span class="line">    [*] Prompt <span class="keyword">for</span> development <span class="built_in">and</span>/<span class="built_in">or</span> incomplete code/drivers</span><br><span class="line">D<span class="function"><span class="title">evice</span> Drivers ---&gt;</span></span><br><span class="line">    [*] N<span class="function"><span class="title">etwork</span> device support ---&gt;</span></span><br><span class="line">        USB N<span class="function"><span class="title">etwork</span> Adapters ---&gt;</span></span><br><span class="line">            [*] Multi-purpose USB Networking Framework</span><br><span class="line">                &lt;M&gt; CDC Ethernet support</span><br><span class="line">                &lt;M&gt; CDC EEM support</span><br><span class="line">                &lt;M&gt; Simple USB Network Links (CDC Ethernet subset)</span><br><span class="line">                &lt;M&gt;   Host <span class="keyword">for</span> RNDIS <span class="built_in">and</span> ActiveSync devices</span><br><span class="line">            [*] Embedded ARM Linux links</span><br></pre></td></tr></table></figure>
<p>KERNEL .config 3.12.21-gentoo-r1</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Device</span> <span class="type">Drivers</span> <span class="comment">---&gt;</span></span><br><span class="line">    [*] <span class="type">Network</span> device sup<span class="keyword">port</span> <span class="comment">---&gt;</span></span><br><span class="line">        <span class="type">USB</span> <span class="type">Network</span> <span class="type">Adapters</span> <span class="comment">---&gt;</span></span><br><span class="line">            [<span class="type">M</span>] <span class="type">Multi</span>-purpose <span class="type">USB</span> <span class="type">Networking</span> <span class="type">Framework</span></span><br><span class="line">                &lt;<span class="type">M</span>&gt; <span class="type">CDC</span> <span class="type">Ethernet</span> sup<span class="keyword">port</span></span><br><span class="line">                &lt;<span class="type">M</span>&gt; <span class="type">CDC</span> <span class="type">EEM</span> sup<span class="keyword">port</span></span><br><span class="line">                [<span class="type">M</span>] <span class="type">Simple</span> <span class="type">USB</span> <span class="type">Network</span> <span class="type">Links</span> (<span class="type">CDC</span> <span class="type">Ethernet</span> subset)</span><br><span class="line">                    [*] <span class="type">Embedded</span> <span class="type">ARM</span> <span class="type">Linux</span> links</span><br></pre></td></tr></table></figure>
<p>You can either build the options in the kernel or leave them as module.</p>
<p>Note. The RNDIS option seems to be needed in some situation only. See this thread to learn more.</p>
<h2 id="Tested-Devices"><a href="#Tested-Devices" class="headerlink" title="Tested Devices"></a>Tested Devices</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">Google</span> Nexus One (<span class="keyword">Android </span><span class="number">2</span>.<span class="number">3</span>.<span class="number">6</span> <span class="keyword">build </span>GRK39F)</span><br><span class="line"><span class="symbol">Google</span> Nexus <span class="number">4</span> (<span class="keyword">Android </span><span class="number">4</span>.<span class="number">3</span> <span class="keyword">build </span>JWR66Y - uses rndis_host)</span><br><span class="line"><span class="symbol">HTC</span> One M7 (Sense <span class="number">5</span>.<span class="number">5</span>, <span class="keyword">Android </span><span class="number">4</span>.<span class="number">3</span>, Software number <span class="number">3</span>.<span class="number">62</span>.<span class="number">401</span>.<span class="number">1</span>,HTC SDK API level <span class="number">5</span>.<span class="number">65</span> - I used rndis_host, cdc_ether <span class="keyword">and </span>usbnet modules ONLY to <span class="meta">get</span> <span class="keyword">it </span>to work)</span><br><span class="line"><span class="symbol">LG</span> P350 (<span class="keyword">Android </span><span class="number">2</span>.<span class="number">2</span>.<span class="number">1</span> <span class="keyword">build </span>FRG83)</span><br><span class="line"><span class="symbol">LG</span> E400 (<span class="keyword">Android </span><span class="number">2</span>.<span class="number">3</span>.<span class="number">6</span> <span class="keyword">build </span>GRK39F)</span><br><span class="line"><span class="symbol">LG</span> L7 P705 (<span class="keyword">Android </span><span class="number">4</span>.<span class="number">1</span>.<span class="number">2</span> <span class="keyword">build </span>JZO54K)</span><br><span class="line"><span class="symbol">Motorola</span> Defy (<span class="keyword">Android </span><span class="number">2</span>.<span class="number">3</span>.<span class="number">7</span> Cyanogenmod <span class="number">7</span>)</span><br><span class="line"><span class="symbol">Motorola</span> Moto G <span class="number">4</span>G <span class="number">2013</span> (<span class="number">1</span>st Gen) (<span class="keyword">Android </span><span class="number">5</span>.<span class="number">1</span>) -- needed rndis_host module -- User:mercuriete</span><br><span class="line"><span class="symbol">Samsung</span> Galaxy S i9000</span><br><span class="line"><span class="symbol">Samsung</span> Galaxy Nexus i9250 (<span class="keyword">Android </span><span class="number">4</span>.<span class="number">0</span>.<span class="number">1</span> <span class="keyword">ITL41D)</span><br><span class="line"></span><span class="symbol">Samsung</span> Galaxy <span class="built_in">S2</span></span><br><span class="line"><span class="symbol">Samsung</span> Galaxy <span class="built_in">S3</span> (GT-I9300 <span class="keyword">Android </span><span class="number">4</span>.<span class="number">3</span> Stock Rom)</span><br><span class="line"><span class="symbol">Sony</span> Xperia Go (St27i <span class="keyword">Android </span><span class="number">4</span>.<span class="number">1</span>.<span class="number">2</span> Stock Rom <span class="keyword">build </span>no <span class="number">6</span>.<span class="number">2</span>.A.<span class="number">1</span>.<span class="number">100</span> -- needed rndis_host module for me - User:LordVan )</span><br><span class="line"><span class="symbol">HTC</span> Desire HD (<span class="keyword">Android </span><span class="number">2</span>.<span class="number">3</span>.<span class="number">6</span> Stock Rom <span class="keyword">build </span><span class="keyword">and </span><span class="keyword">Android </span><span class="number">4</span>.<span class="number">4</span>.<span class="number">4</span> (unofficial CyanogenMod <span class="number">11</span>) -- needed rndis_host module for <span class="keyword">both </span>Roms)</span><br><span class="line"><span class="symbol">Huawei</span> Honor <span class="number">4</span>x (unofficial CyanogenMod <span class="number">11</span> / <span class="keyword">Android </span><span class="number">4</span>.<span class="number">4</span>.<span class="number">4</span>, works great) -- needed rndis_host module AleiPhoenix (talk) <span class="number">13</span>:<span class="number">57</span>, <span class="number">3</span> July <span class="number">2015</span> (UTC)</span><br><span class="line"><span class="symbol">Samsung</span> Galaxy <span class="built_in">S4</span> Mini Duos (GT-I9192, unofficial CyanogenMod <span class="number">12</span>.<span class="number">1</span> / <span class="keyword">Android </span><span class="number">5</span>.<span class="number">1</span>) -- needed rndis_host module</span><br></pre></td></tr></table></figure>
<h2 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h2><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">root #dmesg</span><br><span class="line"></span><br><span class="line">usb <span class="number">1</span>-<span class="number">7</span>: <span class="keyword">New</span> USB device found, idVendor=<span class="number">18</span>d1, idProduct=<span class="number">4</span>e13</span><br><span class="line">usb <span class="number">1</span>-<span class="number">7</span>: <span class="keyword">New</span> USB device strings: Mfr=<span class="number">1</span>, Product=<span class="number">2</span>, SerialNumber=<span class="number">3</span></span><br><span class="line">usb <span class="number">1</span>-<span class="number">7</span>: Product: Nexus One</span><br><span class="line">usb <span class="number">1</span>-<span class="number">7</span>: Manufacturer: Google, Inc.</span><br><span class="line">usb <span class="number">1</span>-<span class="number">7</span>: SerialNumber: HT9CSP803294</span><br><span class="line">usb <span class="number">1</span>-<span class="number">7</span>: usb_probe_device</span><br><span class="line">usb <span class="number">1</span>-<span class="number">7</span>: configuration <span class="string">#1</span> chosen <span class="keyword">from</span> <span class="number">1</span> choice</span><br><span class="line">usb <span class="number">1</span>-<span class="number">7</span>: adding <span class="number">1</span>-<span class="number">7</span>:<span class="number">1.0</span> (config <span class="string">#1</span>, <span class="keyword">interface</span> <span class="number">0</span>)</span><br><span class="line">rndis_host <span class="number">1</span>-<span class="number">7</span>:<span class="number">1.0</span>: usb_probe_interface</span><br><span class="line">rndis_host <span class="number">1</span>-<span class="number">7</span>:<span class="number">1.0</span>: usb_probe_interface - got id</span><br><span class="line">rndis_host <span class="number">1</span>-<span class="number">7</span>:<span class="number">1.0</span>: usb0: <span class="keyword">register</span> <span class="string">'rndis_host'</span> at usb-<span class="number">0000</span>:<span class="number">00</span>:<span class="number">1</span>d.<span class="number">7</span>-<span class="number">7</span>, RNDIS device, ea:<span class="number">61</span>:<span class="number">37</span>:<span class="number">88</span>:a2:e5</span><br><span class="line">usb <span class="number">1</span>-<span class="number">7</span>: adding <span class="number">1</span>-<span class="number">7</span>:<span class="number">1.1</span> (config <span class="string">#1</span>, <span class="keyword">interface</span> <span class="number">1</span>)</span><br><span class="line">drivers/usb/core/inode.c: creating file <span class="string">'004'</span></span><br><span class="line">hub <span class="number">1</span>-<span class="number">0</span>:<span class="number">1.0</span>: state <span class="number">7</span> ports <span class="number">8</span> chg <span class="number">0000</span> evt fe80</span><br><span class="line">uhci_hcd <span class="number">0000</span>:<span class="number">00</span>:<span class="number">1</span>d.<span class="number">0</span>: reserve dev <span class="number">2</span> ep81-INT, period <span class="number">8</span>, phase <span class="number">4</span>, <span class="number">93</span> us</span><br><span class="line">usb <span class="number">1</span>-<span class="number">7</span>: link qh32-<span class="number">0001</span>/ffff88021aa4bc80 start <span class="number">1</span> [<span class="number">1</span>/<span class="number">0</span> us]</span><br><span class="line">usb0: no IPv6 routers present</span><br></pre></td></tr></table></figure>
<p><code>root #ifconfig -a</code></p>
<p>If you see usb0 (or whatever number you’ll get) you are all set.</p>
<h2 id="Connecting"><a href="#Connecting" class="headerlink" title="Connecting"></a>Connecting</h2><p>Since the mobile phone LAN changes its addresses, you need a DHCP client to configure the usbN device.</p>
<p>If you are on a laptop, you probably have a DHCP client. If not, emerge net-misc/dhcpcd.</p>
<p><code>root #emerge --ask net-misc/dhcpcd</code></p>
<h3 id="Manually"><a href="#Manually" class="headerlink" title="Manually"></a>Manually</h3><p>Simply run dhcpcd after plug/mobile activation.</p>
<p><code>root #dhcpcd usb0</code></p>
<h3 id="Permanent-configuration"><a href="#Permanent-configuration" class="headerlink" title="Permanent configuration"></a>Permanent configuration</h3><p>Edit your /etc/conf.d/net to have a permanent, automatic activation of the interface.</p>
<p><code>root #echo &quot;config_usb0=\&quot;dhcp\&quot;&quot; &gt;&gt; /etc/conf.d/net</code></p>
<p>Once plugged in and activated on the mobile phone side, the usb0 will be up and configured.</p>
<h3 id="Checks"><a href="#Checks" class="headerlink" title="Checks"></a>Checks</h3><p>Run the usual checks to verify your connection.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root <span class="selector-id">#ifconfig</span> usb0</span><br><span class="line">root <span class="selector-id">#route</span></span><br><span class="line">root <span class="selector-id">#cat</span> /etc/resolv.conf</span><br></pre></td></tr></table></figure>
<h2 id="Advanced-network-settings"><a href="#Advanced-network-settings" class="headerlink" title="Advanced network settings"></a>Advanced network settings</h2><p>The DHCP is very quick, but the default settings don’t give you as much freedom as you may want.</p>
<p>A possible scenario is that you are in a corporate, protected LAN context that doesn’t give you the Internet connection but where you need to stay connected to have access to some Intranet resource.<br>Or maybe you have a free but limited connection (a public wifi allowing http only, an evil firewall, etc.). Since mobile connections could be expensive, you could want to save your money up using the tethering only when needed.<br>Here is a handful of examples about the DHCP usage.</p>
<p>If you want to limit the information set by DHPC, you can fine-tune its behaviour.</p>
<p>E.g.:<br><code>root #dhcpcd --nogateway --nohook resolv.conf --nohook hostname usb0</code></p>
<p>This will let your default gateway, resolv.conf and hostname as they are, letting you provide extra info by hand.</p>
<p>E.g.:<br><code>root #route add -host my_sshd_remote_host_IP dev usb0</code></p>
<p>Finally, you can permanently configure your USB network interface.<br>E.g.</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">FILE /etc/conf.d/net</span><br><span class="line"></span><br><span class="line">config_usb0=<span class="string">"dhcp"</span></span><br><span class="line">dhcpcd_usb0=<span class="string">"--nogateway --nohook resolv.conf --nohook hostname"</span></span><br><span class="line"># Special hosts</span><br><span class="line">postup()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="string">[[ "usb0" == $&#123;IFACE&#125; ]]</span>; <span class="keyword">then</span></span><br><span class="line">        route add -host my_sshd_remote_host_IP dev usb0</span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Generally, you can avoid every DHCP setting (see the man page) but gather them with</p>
<p><code>root #dhcpcd -U usb0</code></p>
<p>Then you can set what you want in the postup hook.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/introduction-to-cross-compiling/" itemprop="url">
                  Introduction to cross-compiling
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2016-03-02T12:48:41+08:00" content="2016-03-02">
              2016-03-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>refer: <a href="http://landley.net/writing/docs/cross-compiling.html" target="_blank" rel="external">Original link</a></p>
<p>ref: <a href="http://landley.net/writing/docs/cross-compiling.html" target="_blank" rel="external">http://landley.net/writing/docs/cross-compiling.html</a></p>
<h2 id="Host-vs-Target"><a href="#Host-vs-Target" class="headerlink" title="Host vs Target"></a>Host vs Target</h2><p>A compiler is a program that turns source code into executable code. Like all programs, a compiler runs on a specific type of computer, and the new programs it outputs also run on a specific type of computer.[^1]</p>
<p>The computer the compiler runs on is called the host, and the computer the new programs run on is called the target. When the host and target are the same type of machine, the compiler is a native compiler. When the host and target are different, the compiler is a cross compiler.[^2]</p>
<h2 id="Why-cross-compile"><a href="#Why-cross-compile" class="headerlink" title="Why cross-compile?"></a>Why cross-compile?</h2><p>In theory, a PC user who wanted to build programs for some device could get the appropriate target hardware (or emulator), boot a Linux distro on that, and compile natively within that environment. While this is a valid approach (and possibly even a good idea when dealing with something like a Mac Mini), it has a few prominent downsides for things like a linksys router or iPod:</p>
<ul>
<li><p>Speed - Target platforms are usually much slower than hosts, by an order of magnitude or more. Most special-purpose embedded hardware is designed for low cost and low power consumption, not high performance. Modern emulators (like qemu) are actually faster than a lot of the real world hardware they emulate, by virtue of running on high-powered desktop hardware.[^3]</p>
</li>
<li><p>Capability - Compiling is very resource-intensive. The target platform usually doesn’t have gigabytes of memory and hundreds of gigabytes of disk space the way a desktop does; it may not even have the resources to build “hello world”, let alone large and complicated packages.</p>
</li>
<li><p>Availability - Bringing Linux up on a hardware platform it’s never run on before requires a cross-compiler. Even on long-established platforms like Arm or Mips, finding an up-to-date full-featured prebuilt native environment for a given target can be hard. If the platform in question isn’t normally used as a development workstation, there may not be a recent prebuilt distro readily available for it, and if there is it’s probably out of date. If you have to build your own distro for the target before you can build on the target, you’re back to cross-compiling anyway.</p>
</li>
<li><p>Flexibility - A fully capable Linux distribution consists of hundreds of packages, but a cross-compile environment can depend on the host’s existing distro from most things. Cross compiling focuses on building the target packages to be deployed, not spending time getting build-only prerequisites working on the target system.</p>
</li>
<li><p>Convenience - The user interface of headless boxes tends to be a bit crampled. Diagnosing build breaks is frustrating enough as it is. Installing from CD onto a machine that hasn’t got a CD-ROM drive is a pain. Rebooting back and forth between your test environment and your development environment gets old fast, and it’s nice to be able to recover from accidentally lobotomizing your test system.</p>
</li>
</ul>
<h2 id="Why-is-cross-compiling-hard"><a href="#Why-is-cross-compiling-hard" class="headerlink" title="Why is cross-compiling hard?"></a>Why is cross-compiling hard?</h2><h3 id="Portable-native-compiling-is-hard"><a href="#Portable-native-compiling-is-hard" class="headerlink" title="Portable native compiling is hard."></a>Portable native compiling is hard.</h3><p>Most programs are developed on x86 hardware, where they are compiled natively. This means cross-compiling runs into two types of problems: problems with the programs themselves and problems with the build system.</p>
<p>The first type of problem affects all non-x86 targets, both for native and for cross-builds. Most programs make assumptions about the type of machine they run on, which must match the platform in question or the program won’t work. Common assumptions include:</p>
<ul>
<li><p>Word size - Copying a pointer into an int may lose data on a 64 bit platform, and determining the size of a malloc by multiplying by 4 instead of sizeof(long) isn’t good either. Subtle security flaws due to integer overflows are also possible, ala “if (x+y &lt; size) memset(src+x,0,y);”, which results in a 4 gigabyte memset on 32-bit hardware when x=1000 and y=0xFFFFFFF0…</p>
</li>
<li><p>Endianness - Different systems store binary data iternally in different ways, which means that block-reading int or float data from disk or the network may need translation. Type “man byteorder” for details.</p>
</li>
<li><p>Alignment - Some platforms (such as arm) can only read or write ints from addresses that are an even multiple of 4 bytes, otherwise they segfault. Even the ones that can handle arbitrary alignments are slower dealing with unaligned data (they have to fetch twice to get both halves), so the compiler will often pad structures to align variables. Treating structures as a lump of data that can be sent to disk or across the network thus requires extra work to ensure a consistent representation.</p>
</li>
<li><p>Default signedness - Whether the “char” data type defaults to signed or unsigned varies from platform to platform (and in some cases from compiler to compiler), which can cause some really surprising bugs. The easy workaround for this is to provide a compiler argument like “-funsigned-char” to force the default to a known value.</p>
</li>
<li><p>NOMMU - If your target platform doesn’t have a memory management unit, several things need to change. You need vfork() instead of fork(), only certain types of mmap() work (shared or read only, but not copy on write), and the stack doesn’t grow dynamically.</p>
</li>
</ul>
<p>Most packages aim to be portable when compiled natively, and will at least accept patches to fix any of the above problems (with the possible exception of NOMMU issues) submitted to the appropriate development mailing list.</p>
<h3 id="And-then-there’s-cross-compiling"><a href="#And-then-there’s-cross-compiling" class="headerlink" title="And then there’s cross-compiling."></a>And then there’s cross-compiling.</h3><p>In addition to the problems of native compiling, cross-compiling has its own set of issues:</p>
<ul>
<li><p>Configuration issues - Packages with a separate configuration step (the “./configure” part of the standard configure/make/make install) often test for things like endianness or page size, to be portable when natively compiled. When cross-compiling, these values differ between the host system and the target system, so running tests on the host system gives the wrong answers. Configuration can also detect the presence of a package on the host and include support for it, when the target doesn’t have that package or has an incompatible version.</p>
</li>
<li><p>HOSTCC vs TARGETCC - Many build processes require compiling things to run on the host system, such as the above configuration tests, or programs that generate code (such as a C program that creates a .h file which is then #included during the main build). Simply replacing the host compiler with a target compiler breaks packages that need to build things that run during the build itself. Such packages need access to both a host and a target compiler, and need to be taught when to use each one. [^4]</p>
</li>
<li><p>Toolchain Leaks - An improperly configured cross-compile toolchain may leak bits of the host system into the compiled programs, resulting in failures that are usually easy to detect but which can be difficult to diagnose and correct. The toolchain may #include the wrong header files, or search the wrong library paths at link time. Shared libraries often depend on other shared libraries which can also sneak in unexpected link-time references to the host system.</p>
</li>
<li><p>Libraries - Dynamically linked programs must access the appropriate shared libraries at compile time. Shared libraries to the target system need to be added to the cross-compile toolchain so programs can link against them.</p>
</li>
<li><p>Testing - On native builds, the development system provides a convenient testing environment. When cross-compiling, confirming that “hello world” built successfully can require configuring (at least) a bootloader, kernel, root file system, and shared libraries.</p>
</li>
</ul>
<p>[^1]: The most prominent difference between types of computers is what processor is executing the programs, but other differences include library ABIs (such as glibc vs uClibc), machines with configurable endianness (arm vs armeb), or different modes of machines that can run both 32 bit and 64 bit code (such as x86 on x86-64).</p>
<p>[^2]: When building compilers, there’s a third type called a “canadian cross”, which is a cross compiler that doesn’t run on your host system. A canadian cross builds a compiler that runs on one target platform and produces code for another target machine. Such a foreign compiler can be built by first creating a temporary cross compiler from the host to the first target, and then using that to build another cross-compiler for the second target. The first cross-compiler’s target becomes the host the new compiler runs on, and the second target is the platform the new compiler generates output for. This technique is often used to cross-compile a new native compiler for a target platform.</p>
<p>[^3]: Modern desktop systems are sufficiently fast that emulating a target and natively compiling under the emulator is actually a viable strategy. It’s significantly slower than cross compiling, requires finding or generating a native build environment for the target (often meaning you have to set up a cross-compiler anyway), and can be tripped up by differences between the emulator and the real hardware to deploy on. But it’s an option.</p>
<p>[^4]: This is why cross-compile toolchains tend to prefix the names of their utilities, ala “armv5l-linux-gcc”. If that was simply called “gcc” then the host and native compiler couldn’t be in the $PATH at the same time.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/first-post/" itemprop="url">
                  The-first-post
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-12-25T12:18:48+08:00" content="2015-12-25">
              2015-12-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Sample/" itemprop="url" rel="index">
                    <span itemprop="name">Sample</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="工程師最常說的一句話-by-Mark"><a href="#工程師最常說的一句話-by-Mark" class="headerlink" title="工程師最常說的一句話, by Mark"></a>工程師最常說的一句話, by Mark</h3><p><img src="https://chenkc.github.io/img/engineer-saying.jpg" alt="這就是工程師" title="工程師"></p>
<p>測試二號<br><img src="https://chenkc.github.io/img/TOOZA.gif" alt=""></p>
<!--
測試三號
style 1:
![](https://chenkc.github.io/img/logo-02.jpg)

style 2:
<img src="https://chenkc.github.io/img/logo-03.jpg" class="[my-test]" title="[50%] [50%] [the-title]">
<p>–&gt;</p>
-->
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/zz.test/sd-storage-partitions/" itemprop="url">
                  SD Storage Partitions
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-12-23T10:21:33+08:00" content="2015-12-23">
              2015-12-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/create-sd-image/" itemprop="url" rel="index">
                    <span itemprop="name">create sd image</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- article brief , must add more than 130 characters -->
<p>This article introduce the device storage partitions. There are three topics: device compatibility, partition description and create steps.</p>
<h2 id="1-Compatibility"><a href="#1-Compatibility" class="headerlink" title="1. Compatibility"></a>1. Compatibility</h2><h3 id="1-1-Hardware-Device"><a href="#1-1-Hardware-Device" class="headerlink" title="1.1 Hardware Device"></a>1.1 Hardware Device</h3><ol>
<li>ICM/ICS-2010</li>
<li>ICM/ICS-2011</li>
</ol>
<h3 id="1-2-OS"><a href="#1-2-OS" class="headerlink" title="1.2 OS"></a>1.2 OS</h3><ol>
<li>Yocto 1.6.2     (U-boot 2014.04, Kernel 3.10.53)  </li>
<li>Ubuntu 12.04 (U-boot 2014.04, Kernel 3.10.53)</li>
</ol>
<!-- 
2. Android 5.0.2 (U-boot 2014.04, Kernel 3.10.53) -->
<!--
To create storage partitions, you can use MFGTool as described in the Android Quick Start Guide, or you can use format tools in prebuild dir.
-->
<h2 id="2-Partition-Description"><a href="#2-Partition-Description" class="headerlink" title="2. Partition Description"></a>2. Partition Description</h2><p>The layout of the MMC/SD/TF card for device is shown below:</p>
<ul>
<li>[Partition type/index] is which defined in the MBR.  </li>
<li>[Name] is only meaningful in Android. You can ignore it when creating these partitions.  </li>
<li>[Start Offset] shows where partition is started, unit in MB.</li>
</ul>
<!--
The SYSTEM partition is used to put the built out EMBUX ICM/ICS device image. The DATA is used to put applications' unpacked codes/data, system configuration database, etc. In normal boot mode, the root file system is mounted from uramdisk. In recovery mode, the root file system is mounted from the RECOVERY partition.
-->
<table>
<thead>
<tr>
<th>Num</th>
<th>Type</th>
<th>Name</th>
<th>start offset</th>
<th>Size</th>
<th>File System</th>
<th>Content</th>
</tr>
</thead>
<tbody>
<tr>
<td> 1</td>
<td>N/A</td>
<td>boot</td>
<td>1 KB</td>
<td>1 MB</td>
<td>N/A</td>
<td>u-boot.imx</td>
</tr>
<tr>
<td> 2</td>
<td>Primary 1</td>
<td>rootfs</td>
<td>16 MB</td>
<td>7.2 G</td>
<td>ext4</td>
<td>root file system       </td>
</tr>
<tr>
<td> 3</td>
<td>Primary 2</td>
<td>recovery</td>
<td>after rootfs</td>
<td>32 MB</td>
<td>ext4</td>
<td>Reserved       </td>
</tr>
<tr>
<td> 4</td>
<td>Extended</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td> 5</td>
<td>Logical 5</td>
<td>system</td>
<td>after recovery</td>
<td>1 MB</td>
<td></td>
<td>Reserved       </td>
</tr>
<tr>
<td> 6</td>
<td>Logical 6</td>
<td>cache</td>
<td>after system</td>
<td>1 MB</td>
<td></td>
<td>Reserved       </td>
</tr>
<tr>
<td> 6</td>
<td>Logical 7</td>
<td>device</td>
<td>after cache</td>
<td>1 MB</td>
<td></td>
<td>Reserved       </td>
</tr>
<tr>
<td> 8</td>
<td>Logical 8</td>
<td>misc</td>
<td>after device</td>
<td>1 MB</td>
<td></td>
<td>Reserved       </td>
</tr>
<tr>
<td> 9</td>
<td>Logical 9</td>
<td>storage</td>
<td>after misc</td>
<td>500 MB</td>
<td>fat16</td>
<td></td>
</tr>
<tr>
<td>10</td>
<td>Logical 10</td>
<td>env</td>
<td>after storage</td>
<td>90 MB</td>
<td>fat16</td>
<td>boot-script, uImage and device-tree file       </td>
</tr>
</tbody>
</table>
<h2 id="3-Steps"><a href="#3-Steps" class="headerlink" title="3. Steps"></a>3. Steps</h2><h3 id="3-1-Requirement"><a href="#3-1-Requirement" class="headerlink" title="3.1 Requirement"></a>3.1 Requirement</h3><p>An SD/MMC card reader, like a USB card reader, is required. It will be used to transfer the boot loader and kernel images to initialize the partition table and copy the root file system. To simplify the instructions, it is assumed that a 8GB SD/MMC card is used.</p>
<p>To identify the device node assigned to the SD/MMC card, enter the command:</p>
<pre><code>$ cat /proc/partitions
major minor  #blocks  name
   8     0   78124000 sda 
   8     1   75095811 sda1  
   8     2          1 sda2 
   8     5    3028221 sda5 
   8    32   43232323 sdb1 
   8    18    3905535 sdc1
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">In this example, <span class="keyword">the</span> device node assigned is /dev/sdc (<span class="keyword">a</span> block is <span class="number">512</span>B large).</span><br><span class="line"></span><br><span class="line"><span class="comment">### 3.2 Create Partition</span></span><br><span class="line"></span><br><span class="line">To <span class="built_in">create</span> <span class="keyword">a</span> partition, <span class="keyword">at</span> <span class="built_in">offset</span> <span class="number">16384</span> (<span class="keyword">in</span> sectors <span class="keyword">of</span> <span class="number">512</span> <span class="keyword">bytes</span>) enter <span class="keyword">the</span> following <span class="keyword">command</span>:</span><br></pre></td></tr></table></figure>

$ sudo fdisk /dev/sdb

u       [switch the unit to sectors instead of cylinders]
d       [repeat this until no partition is reported by the &apos;p&apos; command ]
n       [create a new partition]
p       [create a primary partition]
1       [the first partition]
16384   [starting at offset sector #16384, i.e. 8MB, which leaves enough space for thekernel, the boot loader and its configuration data]
&lt;enter&gt;     [using the default value will create a partition that spans to the last sector of the medium]
w         [ this writes the partition table to the medium and fdisk exits]
</code></pre><p>The file system format ext3 or ext4 is a good option for removable media due to the built- in journaling. Run the following command to format the partition:</p>
<pre><code>$ sudo mkfs.ext3 /dev/sdb1
</code></pre><p>Or</p>
<pre><code>$ sudo mkfs.ext4 /dev/sdb1
</code></pre><!--

Partition type/index | Name     | Start offeset| Size   | File System       | Content
---------------------|------    |------       |------   |------             |------|   
N/A                  | Boot Loader|   1 KB    |  1 MB   | N/A                         | bootloader (u-boot.imx)
Primary 1            | Rootfs   | 7.3 GB      |  7.3 GB | rootfs (kernel + ramdisk)   | root file system
Primary 2            | Recovery | Follow Boot |  32 MB  | boot.img (kernel + ramdisk) | recovery.img
Logic 5 (extended 3) |          | Follow Boot |   1 KB  | reserved                    | 
Logic 6 (extended 3) |          | Follow Boot |   1 MB  | reserved                    | 
Logic 7 (extended 3) |          | Follow Boot |   1 MB  | reserved                    | 
Logic 8 (extended 3) |          | Follow Boot |   1 MB  | reserved                    | 
Logic 9 (extended 3) | storage  | Follow Boot |  500 MB | boot.img (kernel + ramdisk) | data storage
Logic 10 (extended 3) | env     | Follow Boot |   90 MB | boot.img (kernel + ramdisk) | uImage + device tree tree
-->
<p>More info: <a href="http://www.embux.com" target="_blank" rel="external">Reference</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/zz.test/table-test/" itemprop="url">
                  SD Storage Partitions
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">發表於</span>
            <time itemprop="dateCreated" datetime="2015-12-23T10:21:33+08:00" content="2015-12-23">
              2015-12-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/create-sd-image/" itemprop="url" rel="index">
                    <span itemprop="name">create sd image</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- article brief , must add more than 130 characters -->
<p>This article introduce the device storage partitions. There are three topics: device compatibility, partition description and create steps.</p>
<h2 id="1-Compatibility"><a href="#1-Compatibility" class="headerlink" title="1. Compatibility"></a>1. Compatibility</h2><h3 id="1-1-Hardware-Device"><a href="#1-1-Hardware-Device" class="headerlink" title="1.1 Hardware Device"></a>1.1 Hardware Device</h3><ol>
<li>ICM/ICS-2010</li>
<li>ICM/ICS-2011</li>
</ol>
<h3 id="1-2-OS"><a href="#1-2-OS" class="headerlink" title="1.2 OS"></a>1.2 OS</h3><ol>
<li>Yocto 1.6.2     (U-boot 2014.04, Kernel 3.10.53)  </li>
<li>Ubuntu 12.04 (U-boot 2014.04, Kernel 3.10.53)</li>
</ol>
<!--
2. Android 5.0.2 (U-boot 2014.04, Kernel 3.10.53) -->
<!--
To create storage partitions, you can use MFGTool as described in the Android Quick Start Guide, or you can use format tools in prebuild dir.
-->
<table>
<thead>
<tr>
<th>Num</th>
<th>Type</th>
<th>Name</th>
<th>start offset</th>
<th>Size</th>
<th>File System</th>
<th>Content</th>
</tr>
</thead>
<tbody>
<tr>
<td> 1</td>
<td>N/A</td>
<td>boot</td>
<td>1 KB</td>
<td>1 MB</td>
<td>N/A</td>
<td>u-boot.imx</td>
</tr>
<tr>
<td> 2</td>
<td>Primary 1</td>
<td>rootfs</td>
<td>16 MB</td>
<td>7.2 G</td>
<td>ext4</td>
<td>root file system</td>
</tr>
<tr>
<td> 3</td>
<td>Primary 2</td>
<td>recovery</td>
<td>after rootfs</td>
<td>32 MB</td>
<td>ext4</td>
<td>Reserved</td>
</tr>
<tr>
<td> 4</td>
<td>Extended</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td> 5</td>
<td>Logical 5</td>
<td>system</td>
<td>after recovery</td>
<td>1 MB</td>
<td></td>
<td>Reserved</td>
</tr>
<tr>
<td> 6</td>
<td>Logical 6</td>
<td>cache</td>
<td>after system</td>
<td>1 MB</td>
<td></td>
<td>Reserved</td>
</tr>
<tr>
<td> 6</td>
<td>Logical 7</td>
<td>device</td>
<td>after cache</td>
<td>1 MB</td>
<td></td>
<td>Reserved</td>
</tr>
<tr>
<td> 8</td>
<td>Logical 8</td>
<td>misc</td>
<td>after device</td>
<td>1 MB</td>
<td></td>
<td>Reserved</td>
</tr>
<tr>
<td> 9</td>
<td>Logical 9</td>
<td>storage</td>
<td>after misc</td>
<td>500 MB</td>
<td>fat16</td>
<td></td>
</tr>
<tr>
<td>10</td>
<td>Logical 10</td>
<td>env</td>
<td>after storage</td>
<td>90 MB</td>
<td>fat16</td>
<td>boot-script, uImage and device-tree file</td>
</tr>
</tbody>
</table>
<h2 id="2-Partition-Description"><a href="#2-Partition-Description" class="headerlink" title="2. Partition Description"></a>2. Partition Description</h2><p>The layout of the MMC/SD/TF card for device is shown below:</p>
<ul>
<li>[Partition type/index] is which defined in the MBR.  </li>
<li>[Name] is only meaningful in Android. You can ignore it when creating these partitions.  </li>
<li>[Start Offset] shows where partition is started, unit in MB.</li>
</ul>
<!--
The SYSTEM partition is used to put the built out EMBUX ICM/ICS device image. The DATA is used to put applications' unpacked codes/data, system configuration database, etc. In normal boot mode, the root file system is mounted from uramdisk. In recovery mode, the root file system is mounted from the RECOVERY partition.
-->
<table>
<thead>
<tr>
<th>Num</th>
<th>Type</th>
<th>Name</th>
<th>start offset</th>
<th>Size</th>
<th>File System</th>
<th>Content</th>
</tr>
</thead>
<tbody>
<tr>
<td> 1</td>
<td>N/A</td>
<td>boot</td>
<td>1 KB</td>
<td>1 MB</td>
<td>N/A</td>
<td>u-boot.imx</td>
</tr>
<tr>
<td> 2</td>
<td>Primary 1</td>
<td>rootfs</td>
<td>16 MB</td>
<td>7.2 G</td>
<td>ext4</td>
<td>root file system       </td>
</tr>
<tr>
<td> 3</td>
<td>Primary 2</td>
<td>recovery</td>
<td>after rootfs</td>
<td>32 MB</td>
<td>ext4</td>
<td>Reserved       </td>
</tr>
<tr>
<td> 4</td>
<td>Extended</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td> 5</td>
<td>Logical 5</td>
<td>system</td>
<td>after recovery</td>
<td>1 MB</td>
<td></td>
<td>Reserved       </td>
</tr>
<tr>
<td> 6</td>
<td>Logical 6</td>
<td>cache</td>
<td>after system</td>
<td>1 MB</td>
<td></td>
<td>Reserved       </td>
</tr>
<tr>
<td> 6</td>
<td>Logical 7</td>
<td>device</td>
<td>after cache</td>
<td>1 MB</td>
<td></td>
<td>Reserved       </td>
</tr>
<tr>
<td> 8</td>
<td>Logical 8</td>
<td>misc</td>
<td>after device</td>
<td>1 MB</td>
<td></td>
<td>Reserved       </td>
</tr>
<tr>
<td> 9</td>
<td>Logical 9</td>
<td>storage</td>
<td>after misc</td>
<td>500 MB</td>
<td>fat16</td>
<td></td>
</tr>
<tr>
<td>10</td>
<td>Logical 10</td>
<td>env</td>
<td>after storage</td>
<td>90 MB</td>
<td>fat16</td>
<td>boot-script, uImage and device-tree file       </td>
</tr>
</tbody>
</table>
<h2 id="3-Steps"><a href="#3-Steps" class="headerlink" title="3. Steps"></a>3. Steps</h2><h3 id="3-1-Requirement"><a href="#3-1-Requirement" class="headerlink" title="3.1 Requirement"></a>3.1 Requirement</h3><p>An SD/MMC card reader, like a USB card reader, is required. It will be used to transfer the boot loader and kernel images to initialize the partition table and copy the root file system. To simplify the instructions, it is assumed that a 8GB SD/MMC card is used.</p>
<p>To identify the device node assigned to the SD/MMC card, enter the command:</p>
<pre><code>$ cat /proc/partitions
major minor  #blocks  name
   8     0   78124000 sda
   8     1   75095811 sda1  
   8     2          1 sda2
   8     5    3028221 sda5
   8    32   43232323 sdb1
   8    18    3905535 sdc1
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">In this example, <span class="keyword">the</span> device node assigned is /dev/sdc (<span class="keyword">a</span> block is <span class="number">512</span>B large).</span><br><span class="line"></span><br><span class="line"><span class="comment">### 3.2 Create Partition</span></span><br><span class="line"></span><br><span class="line">To <span class="built_in">create</span> <span class="keyword">a</span> partition, <span class="keyword">at</span> <span class="built_in">offset</span> <span class="number">16384</span> (<span class="keyword">in</span> sectors <span class="keyword">of</span> <span class="number">512</span> <span class="keyword">bytes</span>) enter <span class="keyword">the</span> following <span class="keyword">command</span>:</span><br></pre></td></tr></table></figure>

$ sudo fdisk /dev/sdb

u       [switch the unit to sectors instead of cylinders]
d       [repeat this until no partition is reported by the &apos;p&apos; command ]
n       [create a new partition]
p       [create a primary partition]
1       [the first partition]
16384   [starting at offset sector #16384, i.e. 8MB, which leaves enough space for thekernel, the boot loader and its configuration data]
&lt;enter&gt;     [using the default value will create a partition that spans to the last sector of the medium]
w         [ this writes the partition table to the medium and fdisk exits]
</code></pre><p>The file system format ext3 or ext4 is a good option for removable media due to the built- in journaling. Run the following command to format the partition:</p>
<pre><code>$ sudo mkfs.ext3 /dev/sdb1
</code></pre><p>Or</p>
<pre><code>$ sudo mkfs.ext4 /dev/sdb1
</code></pre><!--

Partition type/index | Name     | Start offeset| Size   | File System       | Content
---------------------|------    |------       |------   |------             |------|   
N/A                  | Boot Loader|   1 KB    |  1 MB   | N/A                         | bootloader (u-boot.imx)
Primary 1            | Rootfs   | 7.3 GB      |  7.3 GB | rootfs (kernel + ramdisk)   | root file system
Primary 2            | Recovery | Follow Boot |  32 MB  | boot.img (kernel + ramdisk) | recovery.img
Logic 5 (extended 3) |          | Follow Boot |   1 KB  | reserved                    |
Logic 6 (extended 3) |          | Follow Boot |   1 MB  | reserved                    |
Logic 7 (extended 3) |          | Follow Boot |   1 MB  | reserved                    |
Logic 8 (extended 3) |          | Follow Boot |   1 MB  | reserved                    |
Logic 9 (extended 3) | storage  | Follow Boot |  500 MB | boot.img (kernel + ramdisk) | data storage
Logic 10 (extended 3) | env     | Follow Boot |   90 MB | boot.img (kernel + ramdisk) | uImage + device tree tree
-->
<p>More info: <a href="http://www.embux.com" target="_blank" rel="external">Reference</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="i.am.chenkc" />
          <p class="site-author-name" itemprop="name">i.am.chenkc</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">18</span>
              <span class="site-state-item-name">文章</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">分類</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">56</span>
                <span class="site-state-item-name">標籤</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">i.am.chenkc</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 強力驅動
</div>

<div class="theme-info">
  主題 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = false;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = decodeURIComponent(data.url);
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title >= 0 || index_content >= 0 ){
                                isMatch = true;
								if (i == 0) {
                                    first_occur = index_content;
                                }
                            } 
							
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

  


</body>
</html>
